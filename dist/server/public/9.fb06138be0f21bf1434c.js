(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{jkDv:function(t,e,c){"use strict";c.r(e),c.d(e,"AdminModule",(function(){return X}));var a=c("2kYt"),n=c("nIj0"),i=c("sEIs"),r=c("EM62"),o=c("3DyK");let s=(()=>{class t{constructor(){this.links=[{link:".",title:"Home"},{link:"classi",title:"Classi"},{link:"accounts",title:"Account"},{link:"csv",title:"CSV"},{link:"reports",title:"Segnalazioni"},{link:"errors",title:"Errori"},{link:"events",title:"Eventi"}]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Jb({type:t,selectors:[["csl-admin"]],decls:3,vars:1,consts:[[3,"links"]],template:function(t,e){1&t&&(r.Vb(0,"csl-dashboard-model",0),r.Vb(1,"span"),r.Fc(2,"Admin"),r.Ub(),r.Ub()),2&t&&r.mc("links",e.links)},directives:[o.a],styles:[""]}),t})();var b=c("9ufM"),l=c("jxfh"),m=c("SKMG"),u=c("PBFl");let d=(()=>{class t{constructor(t,e){this.auth=t,this.dialog=e}ngOnInit(){}signOut(){this.dialog.open({title:"Sei sicuro di voler uscire?",text:"Ci\xf2 che stavi facendo potrebbe non essere salvato",color:"warn",answer:"S\xec, esci"}).subscribe((t=>{this.auth.signOut()}))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(b.a),r.Pb(l.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-admin-home"]],decls:10,vars:3,consts:[[3,"user"],["header",""],["activities-label",""],["activities",""],["mat-raised-button","","color","warn","logout-btn","",3,"click"]],template:function(t,e){1&t&&(r.Vb(0,"csl-dashboard-home",0),r.hc(1,"async"),r.Vb(2,"span",1),r.Fc(3,"I tuoi dati"),r.Ub(),r.Vb(4,"span",2),r.Fc(5,"Le tue attivit\xe0"),r.Ub(),r.Vb(6,"span",3),r.Fc(7,"Ciao Luca! Cosa vuoi fare oggi?"),r.Ub(),r.Vb(8,"button",4),r.cc("click",(function(){return e.signOut()})),r.Fc(9,"Esci"),r.Ub(),r.Ub()),2&t&&r.mc("user",r.ic(1,1,e.auth.user$))},directives:[m.a,u.b],pipes:[a.b],styles:[""]}),t})();var p=c("vobO");let h=(()=>{class t{constructor(t){this.http=t}createAccount(t){return this.http.post("/api/admin/accounts",{account:t})}removeAccount(t){return this.http.delete("/api/admin/accounts/"+t)}getErrors(){return this.http.get("/api/admin/errors")}getEvents(){return this.http.get("/api/admin/events")}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(p.b))},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();var f=c("29Wa"),g=c("Cd2c");const v=t=>/^[0-9]{1}[A-Z]{1}/.test(t.value)?null:{classID:{valid:!1}};let V=(()=>{class t{constructor(t,e,c){this.dialog=t,this.admin=e,this.toastr=c,this.accountForm=new n.h({email:new n.e("",[n.u.required,n.u.email]),firstName:new n.e("",n.u.required),lastName:new n.e("",n.u.required),classID:new n.e("",[n.u.required,v,n.u.maxLength(2),n.u.minLength(2)])}),this.removeEmail=new n.e("",[n.u.required,n.u.email])}ngOnInit(){}createAccount(t){this.dialog.open({title:"Aggiungere account?",text:"Verr\xe0 aggiunto un account associato alla mail "+this.accountForm.value.email,color:"primary",answer:"Aggiungi"}).subscribe((()=>{this.admin.createAccount(this.accountForm.value).subscribe((e=>{e.success?this.toastr.show({message:"Account creato",color:"success"}):e.success&&this.toastr.showError(),this.accountForm.reset(),t.reset()}))}))}removeAccount(){this.dialog.open({title:"Rimuovere account?",text:`L'account associato alla mail ${this.removeEmail.value} sar\xe0 eliminato e con esso tutti i suoi dati`,color:"accent",answer:"S\xec, rimuovi"}).subscribe((()=>{this.admin.removeAccount(this.removeEmail.value).subscribe((t=>{t.success?this.toastr.show({message:"Account rimosso",color:"accent"}):t.success&&this.toastr.showError(),this.removeEmail.reset()}))}))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(l.a),r.Pb(h),r.Pb(l.b))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-accounts"]],decls:29,vars:4,consts:[[1,"container",3,"formGroup","ngSubmit"],["formElement",""],[1,"form-field","email-input"],["matInput","","type","text","formControlName","email"],[1,"form-field"],["matInput","","type","text","formControlName","firstName"],["matInput","","type","text","formControlName","lastName"],["matInput","","type","text","formControlName","classID"],[1,"submit-btn"],["mat-raised-button","","color","primary",3,"disabled"],[1,"secondForm"],[1,"email-input"],["matInput","","type","text",3,"formControl"],["mat-raised-button","","color","warn",3,"disabled","click"]],template:function(t,e){if(1&t){const t=r.Wb();r.Vb(0,"form",0,1),r.cc("ngSubmit",(function(){r.uc(t);const c=r.sc(1);return e.createAccount(c)})),r.Vb(2,"mat-form-field",2),r.Vb(3,"mat-label"),r.Fc(4,"Email"),r.Ub(),r.Qb(5,"input",3),r.Ub(),r.Vb(6,"mat-form-field",4),r.Vb(7,"mat-label"),r.Fc(8,"Nome"),r.Ub(),r.Qb(9,"input",5),r.Ub(),r.Vb(10,"mat-form-field",4),r.Vb(11,"mat-label"),r.Fc(12,"Cognome"),r.Ub(),r.Qb(13,"input",6),r.Ub(),r.Vb(14,"mat-form-field",4),r.Vb(15,"mat-label"),r.Fc(16,"Classe"),r.Ub(),r.Qb(17,"input",7),r.Ub(),r.Vb(18,"div",8),r.Vb(19,"button",9),r.Fc(20," Aggiungi account "),r.Ub(),r.Ub(),r.Ub(),r.Vb(21,"div",10),r.Vb(22,"mat-form-field",11),r.Vb(23,"mat-label"),r.Fc(24,"Email"),r.Ub(),r.Qb(25,"input",12),r.Ub(),r.Qb(26,"br"),r.Vb(27,"button",13),r.cc("click",(function(){return e.removeAccount()})),r.Fc(28," Rimuovi account "),r.Ub(),r.Ub()}2&t&&(r.mc("formGroup",e.accountForm),r.Db(19),r.mc("disabled",e.accountForm.invalid),r.Db(6),r.mc("formControl",e.removeEmail),r.Db(2),r.mc("disabled",e.removeEmail.invalid))},directives:[n.v,n.p,n.i,f.b,f.f,g.a,n.b,n.o,n.g,u.b,n.f],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.form-field[_ngcontent-%COMP%]{margin-right:20px}.submit-btn[_ngcontent-%COMP%]{flex:100%}.email-input[_ngcontent-%COMP%]{width:300px}.secondForm[_ngcontent-%COMP%]{margin-top:20px}"]}),t})();var U=c("PtQB"),D=c("KZIX"),w=c("Meci"),F=c("Rjd2");function y(t,e){if(1&t&&(r.Vb(0,"mat-card",9),r.Vb(1,"mat-card-header"),r.Vb(2,"mat-card-title"),r.Fc(3),r.Ub(),r.Vb(4,"mat-card-subtitle"),r.Fc(5),r.hc(6,"date"),r.Ub(),r.Ub(),r.Vb(7,"mat-card-content"),r.Vb(8,"h3"),r.Fc(9,"Descrizione"),r.Ub(),r.Vb(10,"p"),r.Fc(11),r.Ub(),r.Vb(12,"h3"),r.Fc(13,"Contesto"),r.Ub(),r.Vb(14,"p"),r.Fc(15),r.Ub(),r.Ub(),r.Ub()),2&t){const t=e.$implicit;r.Db(3),r.Jc(" ",t.firstName," ",t.lastName," - ",t.classID," "),r.Db(2),r.Hc(" ",r.jc(6,6,t.date,"dd - MM - yy")," "),r.Db(6),r.Gc(t.bug.description),r.Db(4),r.Gc(t.bug.context)}}function C(t,e){if(1&t&&(r.Vb(0,"div",7),r.Dc(1,y,16,9,"mat-card",8),r.Ub()),2&t){const t=r.gc();r.Db(1),r.mc("ngForOf",t.technical)}}function x(t,e){1&t&&(r.Vb(0,"div",10),r.Vb(1,"csl-alert",11),r.Fc(2,"Nessun problema tecnico segnalato!"),r.Ub(),r.Ub())}function E(t,e){if(1&t&&(r.Vb(0,"mat-card",9),r.Vb(1,"mat-card-header"),r.Vb(2,"mat-card-title"),r.Fc(3),r.Ub(),r.Vb(4,"mat-card-subtitle"),r.Fc(5),r.hc(6,"date"),r.Ub(),r.Ub(),r.Vb(7,"mat-card-content"),r.Vb(8,"h3"),r.Fc(9,"Descrizione"),r.Ub(),r.Vb(10,"p"),r.Fc(11),r.Ub(),r.Vb(12,"h3"),r.Fc(13,"Contesto"),r.Ub(),r.Vb(14,"p"),r.Fc(15),r.Ub(),r.Ub(),r.Ub()),2&t){const t=e.$implicit;r.Db(3),r.Jc(" ",t.firstName," ",t.lastName," - ",t.classID," "),r.Db(2),r.Hc(" ",r.jc(6,6,t.date,"dd - MM - yy")," "),r.Db(6),r.Gc(t.bug.description),r.Db(4),r.Gc(t.bug.context)}}function I(t,e){if(1&t&&(r.Vb(0,"div",7),r.Dc(1,E,16,9,"mat-card",8),r.Ub()),2&t){const t=r.gc();r.Db(1),r.mc("ngForOf",t.visual)}}function M(t,e){1&t&&(r.Vb(0,"div",10),r.Vb(1,"csl-alert",11),r.Fc(2,"Nessun bug visivo segnalato!"),r.Ub(),r.Ub())}function P(t,e){if(1&t&&(r.Vb(0,"mat-card",9),r.Vb(1,"mat-card-header"),r.Vb(2,"mat-card-title"),r.Fc(3),r.Ub(),r.Vb(4,"mat-card-subtitle"),r.Fc(5),r.hc(6,"date"),r.Ub(),r.Ub(),r.Vb(7,"mat-card-content"),r.Vb(8,"h3"),r.Fc(9,"Descrizione"),r.Ub(),r.Vb(10,"p"),r.Fc(11),r.Ub(),r.Vb(12,"h3"),r.Fc(13,"Contesto"),r.Ub(),r.Vb(14,"p"),r.Fc(15),r.Ub(),r.Ub(),r.Ub()),2&t){const t=e.$implicit;r.Db(3),r.Jc(" ",t.firstName," ",t.lastName," - ",t.classID," "),r.Db(2),r.Hc(" ",r.jc(6,6,t.date,"dd - MM - yy")," "),r.Db(6),r.Gc(t.bug.description),r.Db(4),r.Gc(t.bug.context)}}function O(t,e){if(1&t&&(r.Vb(0,"div",7),r.Dc(1,P,16,9,"mat-card",8),r.Ub()),2&t){const t=r.gc();r.Db(1),r.mc("ngForOf",t.other)}}function k(t,e){1&t&&(r.Vb(0,"div",10),r.Vb(1,"csl-alert",11),r.Fc(2,"Nessun altro problema segnalato!"),r.Ub(),r.Ub())}let A=(()=>{class t{constructor(t){this.reports=t}ngOnInit(){this.reports.getReports().subscribe((t=>{this.technical=t.data.filter((t=>"Tecnico"===t.bug.category)),this.visual=t.data.filter((t=>"Visivo"===t.bug.category)),this.other=t.data.filter((t=>"Altro"===t.bug.category))}))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(U.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["csl-reports"]],decls:13,vars:6,consts:[["label","Errori Tecnici"],["class","card-container",4,"ngIf","ngIfElse"],["noTechnical",""],["label","Bug Visivi"],["noVisual",""],["label","Altro"],["noOther",""],[1,"card-container"],["class","report",4,"ngFor","ngForOf"],[1,"report"],[1,"alert-container"],["color","success"]],template:function(t,e){if(1&t&&(r.Vb(0,"mat-tab-group"),r.Vb(1,"mat-tab",0),r.Dc(2,C,2,1,"div",1),r.Dc(3,x,3,0,"ng-template",null,2,r.Ec),r.Ub(),r.Vb(5,"mat-tab",3),r.Dc(6,I,2,1,"div",1),r.Dc(7,M,3,0,"ng-template",null,4,r.Ec),r.Ub(),r.Vb(9,"mat-tab",5),r.Dc(10,O,2,1,"div",1),r.Dc(11,k,3,0,"ng-template",null,6,r.Ec),r.Ub(),r.Ub()),2&t){const t=r.sc(4),c=r.sc(8),a=r.sc(12);r.Db(2),r.mc("ngIf",e.technical&&e.technical.length>0)("ngIfElse",t),r.Db(4),r.mc("ngIf",e.visual&&e.visual.length>0)("ngIfElse",c),r.Db(4),r.mc("ngIf",e.other&&e.other.length>0)("ngIfElse",a)}},directives:[D.b,D.a,a.m,a.l,w.a,w.e,w.h,w.g,w.d,F.a],pipes:[a.f],styles:["h3[_ngcontent-%COMP%]{font-weight:500}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:20px}.report[_ngcontent-%COMP%]{max-width:500px;width:25%;margin-right:20px;margin-bottom:20px}.alert-container[_ngcontent-%COMP%]{margin-top:20px}"]}),t})();var N=c("FlRo"),S=c("iAde");function j(t,e){1&t&&(r.Vb(0,"th",8),r.Fc(1,"Timestamp"),r.Ub())}function L(t,e){if(1&t&&(r.Vb(0,"td",9),r.Fc(1),r.hc(2,"date"),r.Ub()),2&t){const t=e.$implicit;r.Db(1),r.Hc(" ",r.jc(2,1,t.timestamp,"[dd/MM/yy] hh:mm:ss")," ")}}function Q(t,e){1&t&&(r.Vb(0,"th",8),r.Fc(1,"Descrizione"),r.Ub())}function R(t,e){if(1&t&&(r.Vb(0,"td",9),r.Fc(1),r.Ub()),2&t){const t=e.$implicit;r.Db(1),r.Gc(t.message)}}function G(t,e){1&t&&r.Qb(0,"tr",10)}function J(t,e){1&t&&r.Qb(0,"tr",11)}const _=function(){return[10,25,100]};let T=(()=>{class t{constructor(t,e){this.admin=t,this.router=e,this.displayedColumns=["time","message"],this.logType=this.router.url.includes("events")?"events":"errors"}ngAfterViewInit(){"events"===this.logType?this.admin.getEvents().subscribe((t=>{this.dataSource=new N.k(t.data.reverse()),this.dataSource.paginator=this.paginator})):"errors"===this.logType&&this.admin.getErrors().subscribe((t=>{this.dataSource=new N.k(t.data.reverse()),this.dataSource.paginator=this.paginator}))}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(h),r.Pb(i.f))},t.\u0275cmp=r.Jb({type:t,selectors:[["csl-logs"]],viewQuery:function(t,e){var c;1&t&&r.Kc(S.a,!0),2&t&&r.rc(c=r.dc())&&(e.paginator=c.first)},decls:11,vars:5,consts:[["mat-table","",3,"dataSource"],["matColumnDef","time"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","message"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(r.Vb(0,"mat-card"),r.Vb(1,"table",0),r.Tb(2,1),r.Dc(3,j,2,0,"th",2),r.Dc(4,L,3,4,"td",3),r.Sb(),r.Tb(5,4),r.Dc(6,Q,2,0,"th",2),r.Dc(7,R,2,1,"td",3),r.Sb(),r.Dc(8,G,1,0,"tr",5),r.Dc(9,J,1,0,"tr",6),r.Ub(),r.Qb(10,"mat-paginator",7),r.Ub()),2&t&&(r.Db(1),r.mc("dataSource",e.dataSource),r.Db(7),r.mc("matHeaderRowDef",e.displayedColumns),r.Db(1),r.mc("matRowDefColumns",e.displayedColumns),r.Db(1),r.mc("pageSizeOptions",r.oc(4,_)))},directives:[w.a,N.j,N.c,N.e,N.b,N.g,N.i,S.a,N.d,N.a,N.f,N.h],pipes:[a.f],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),t})();var z=c("r8jD"),H=c("8BM3"),$=c("zlwK");const q=[{path:"",component:s,children:[{path:"",component:d},{path:"classi",children:[{path:"",component:z.a},{path:":classID",component:H.a}]},{path:"accounts",component:V},{path:"csv",component:$.a},{path:"reports",component:A},{path:"errors",component:T},{path:"events",component:T}]}];let K=(()=>{class t{}return t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({factory:function(e){return new(e||t)},imports:[[i.j.forChild(q)],i.j]}),t})();var B=c("PCNd");let Z=(()=>{class t extends S.b{constructor(){super(...arguments),this.itemsPerPageLabel="Elementi per pagina",this.nextPageLabel="Pagina successiva",this.previousPageLabel="Pagina precedente",this.getRangeLabel=function(t,e,c){if(0===c||0===e)return"0 di "+c;const a=t*e;return a+1+" - "+(a<(c=Math.max(c,0))?Math.min(a+e,c):a+e)+" di "+c}}}return t.\u0275fac=function(e){return W(e||t)},t.\u0275prov=r.Lb({token:t,factory:t.\u0275fac}),t})();const W=r.Xb(Z);let X=(()=>{class t{}return t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({factory:function(e){return new(e||t)},providers:[h,{provide:S.b,useClass:Z}],imports:[[a.c,n.k,n.s,K,l.c,B.a]]}),t})()}}]);