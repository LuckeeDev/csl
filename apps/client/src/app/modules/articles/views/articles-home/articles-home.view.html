<div class="container" *cslLet="filteredArticles$ | async as articles">
	<h1 class="title">Quinto Piano</h1>

	<h1 class="header">Articoli in evidenza</h1>

	<mat-form-field class="search">
		<mat-label>Cerca articoli...</mat-label>
		<input matInput type="text" [formControl]="search" />
	</mat-form-field>

	<mat-card
		*ngFor="
		  let article of articles;
		  let i = index
		"
		[routerLink]="[article.title]"
		class="article-preview"
	>
		<div
			class="category-color"
			[ngStyle]="{ 'background-color': article.category.color }"
		></div>

		<mat-card-content class="content">
			<ng-container>
				<img
					[src]="strapiURL + article.cover.url"
					class="cover"
					[ngClass]="{ odd: i % 2 === 1, even: i % 2 === 0 }"
					alt="Immagine di copertina dell'articolo"
				/>

				<div class="text" [ngClass]="{ odd: i % 2 === 1, even: i % 2 === 0 }">
					<h1 class="title">{{ article.title }}</h1>
					<span class="category-label">{{ article.category.name }}</span>
					<!-- See https://stackoverflow.com/a/44669515 -->
					<p class="preview" *cslLet="article.content as content">
						{{ (content.length > 50) ? (content | slice:0:50) + '...' : (content) }}
					</p>
					<p class="data">
						{{ article.author }} | {{ article.published_at | date: 'dd / MM /
						yy' }}
					</p>
				</div>
			</ng-container>
		</mat-card-content>
	</mat-card>

	<ng-template #noArticles>
		<csl-alert class="alert"> Nessun articolo trovato! </csl-alert>
	</ng-template>
</div>
