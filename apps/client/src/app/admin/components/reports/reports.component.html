<mat-tab-group>
  <mat-tab>
    <ng-template mat-tab-label>
      <span
        matBadge="{{ unsolved('technical') }}"
        matBadgeOverlap="false"
        matBadgeColor="accent"
      >
        Problemi tecnici
      </span>
    </ng-template>

    <div
      class="card-container"
      *ngIf="technical && technical.length > 0; else noTechnical"
    >
      <mat-card *ngFor="let report of technical" class="report">
        <mat-card-header>
          <mat-card-title>
            {{ report.name }} - {{ report.classID.toUpperCase() }}
          </mat-card-title>
          <mat-card-subtitle>
            {{ report.date | date: 'dd - MM - yy' }}
          </mat-card-subtitle>
          <mat-checkbox
            color="primary"
            class="toggle-solved"
            [checked]="report.solved"
            (change)="toggleSolved($event, report.id)"
          ></mat-checkbox>
        </mat-card-header>
        <mat-card-content>
          <h3>Descrizione</h3>
          <p>{{ report.bug.description }}</p>

          <h3>Contesto</h3>
          <p>{{ report.bug.context }}</p>
        </mat-card-content>
      </mat-card>
    </div>

    <ng-template #noTechnical>
      <div class="alert-container">
        <csl-alert color="success"
          >Nessun problema tecnico segnalato!</csl-alert
        >
      </div>
    </ng-template>
  </mat-tab>

  <mat-tab>
    <ng-template mat-tab-label>
      <span
        matBadge="{{ unsolved('visual') }}"
        matBadgeOverlap="false"
        matBadgeColor="accent"
      >
        Bug visivi
      </span>
    </ng-template>

    <div
      class="card-container"
      *ngIf="visual && visual.length > 0; else noVisual"
    >
      <mat-card *ngFor="let report of visual" class="report">
        <mat-card-header>
          <mat-card-title>
            {{ report.name }} - {{ report.classID.toUpperCase() }}
          </mat-card-title>
          <mat-card-subtitle>
            {{ report.date | date: 'dd - MM - yy' }}
          </mat-card-subtitle>
          <mat-checkbox
            color="primary"
            class="toggle-solved"
            [checked]="report.solved"
            (change)="toggleSolved($event, report.id)"
          ></mat-checkbox>
        </mat-card-header>
        <mat-card-content>
          <h3>Descrizione</h3>
          <p>{{ report.bug.description }}</p>

          <h3>Contesto</h3>
          <p>{{ report.bug.context }}</p>
        </mat-card-content>
      </mat-card>
    </div>

    <ng-template #noVisual>
      <div class="alert-container">
        <csl-alert color="success">Nessun bug visivo segnalato!</csl-alert>
      </div>
    </ng-template>
  </mat-tab>

  <mat-tab>
    <ng-template mat-tab-label>
      <span
        matBadge="{{ unsolved('other') }}"
        matBadgeOverlap="false"
        matBadgeColor="accent"
      >
        Altro
      </span>
    </ng-template>

    <div class="card-container" *ngIf="other && other.length > 0; else noOther">
      <mat-card *ngFor="let report of other" class="report">
        <mat-card-header>
          <mat-card-title>
            {{ report.name }} - {{ report.classID.toUpperCase() }}
          </mat-card-title>
          <mat-card-subtitle>
            {{ report.date | date: 'dd - MM - yy' }}
          </mat-card-subtitle>
          <mat-checkbox
            color="primary"
            class="toggle-solved"
            [checked]="report.solved"
            (change)="toggleSolved($event, report.id)"
          ></mat-checkbox>
        </mat-card-header>
        <mat-card-content>
          <h3>Descrizione</h3>
          <p>{{ report.bug.description }}</p>

          <h3>Contesto</h3>
          <p>{{ report.bug.context }}</p>
        </mat-card-content>
      </mat-card>
    </div>

    <ng-template #noOther>
      <div class="alert-container">
        <csl-alert color="success">Nessun altro problema segnalato!</csl-alert>
      </div>
    </ng-template>
  </mat-tab>
</mat-tab-group>
